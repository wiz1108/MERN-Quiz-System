(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},173:function(e,t,n){},177:function(e,t,n){},190:function(e,t,n){},212:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},218:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n(0),s=n.n(i),a=n(21),r=n.n(a),o=(n(173),n(13)),l=n.n(o),u=n(25),d=n(6),j=n(29),b=n(307),h=n(320),p=n(321),O=n(325),x=n(78);x.a.initializeApp({apiKey:"AIzaSyBoWLYrLRwYfdk7-LSgNAcbLtDtG3gj0kQ",authDomain:"quiz-1db0c.firebaseapp.com",projectId:"quiz-1db0c",storageBucket:"quiz-1db0c.appspot.com",messagingSenderId:"78963595474",appId:"1:78963595474:web:8d9d4f5b4ed293f52b350b"}),x.a.analytics(),x.a.auth();var m=x.a,f=(n(177),n(178),n(179),n(139)),v=(n(190),n(141)),g=n.n(v),y=(n(212),function(){return Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("h1",{className:"blue",style:{fontSize:"5rem"},children:Object(c.jsx)("b",{children:"Quiz"})}),Object(c.jsx)(g.a,{color:"#29455a",width:130,height:130,type:"BallTriangle"})]})}),N=function(e){var t=e.setUser,n=Object(i.useState)(!0),s=Object(d.a)(n,2),a=s[0],r=s[1],o=Object(i.useState)(""),b=Object(d.a)(o,2),h=b[0],p=b[1],O={signInflow:"popup",signInOptions:[m.auth.GoogleAuthProvider.PROVIDER_ID,m.auth.FacebookAuthProvider.PROVIDER_ID,m.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};return Object(i.useEffect)((function(){var e=!0;return m.auth().onAuthStateChanged(function(){var n=Object(u.a)(l.a.mark((function n(c){var i,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!c||!e){n.next=13;break}return n.next=3,fetch("/API/users/login",{method:"POST",body:JSON.stringify({name:m.auth().currentUser.displayName}),headers:{"Content-Type":"application/json"}});case 3:return i=n.sent,n.next=6,i.json();case 6:s=n.sent,localStorage.setItem("username",m.auth().currentUser.displayName),localStorage.setItem("id",s.id),t({uid:m.auth().currentUser.uid,name:m.auth().currentUser.displayName,email:m.auth().currentUser.email}),p("/dashboard"),n.next=14;break;case 13:t({});case 14:e&&r(!1);case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),function(){return e=!1}}),[t]),h?Object(c.jsx)(j.a,{push:!0,to:h}):Object(c.jsx)("div",{className:"vertical-center",style:{backgroundColor:"#294634"},children:a?Object(c.jsx)(y,{}):Object(c.jsxs)("div",{id:"Home",children:[Object(c.jsxs)("div",{id:"logo",children:[Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{children:"Create Al Haramain Games"})}),Object(c.jsx)("div",{id:"description",children:"Now create and join quiz at a single platform.You can create trivia quizzes, personality test, polls and survays. Share out your quiz with your students with a unique code."})]}),Object(c.jsxs)("div",{id:"login-card",children:[Object(c.jsx)("label",{className:"login-label",children:Object(c.jsx)("b",{children:"Q"})}),Object(c.jsx)(f.StyledFirebaseAuth,{borderRadius:"40px",uiConfig:O,firebaseAuth:m.auth()})]})]})})},z=n(26),S=(n(215),n(289)),k=n(260),w=n(326),C=n(294),q=(n(119),n(293)),Q=n(295),T=n(296),I=Object(S.a)((function(e){return{root:{},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:0,width:"90%",borderRadius:"10px"},buttons:{display:"flex",justifyContent:"flex-end"}}}));function E(e){var t=e.type,n=void 0===t?"add":t,a=e.title,r=void 0===a?"":a,o=e.opType,l=void 0===o?"radio":o,u=e.opArray,j=e.index,b=void 0===j?-1:j,h=e.addQuestionHandle,p=(e.editQuestionHandle,I()),O=s.a.useState(!1),x=Object(d.a)(O,2),m=x[0],f=x[1],v=Object(i.useState)("radio"),g=Object(d.a)(v,2),y=g[0],N=g[1],S=Object(i.useState)([]),E=Object(d.a)(S,2),A=E[0],P=E[1],R=Object(i.useState)(null),U=Object(d.a)(R,2),D=U[0],_=U[1],M=Object(i.useState)(-1),F=Object(d.a)(M,2),L=F[0],J=F[1],H=Object(i.useState)(""),B=Object(d.a)(H,2),G=B[0],Y=B[1],Z=Object(i.useRef)(null),W=Object(i.useRef)(null);Object(i.useEffect)((function(){m?(Y(r),N(l),u&&P(u)):(Y(""),P([]),N("radio"))}),[m,r,l,u]);var K=function(){f(!0)};return Object(c.jsxs)("div",{className:p.root,children:["add"===n?Object(c.jsx)("button",{className:"button",onClick:K,children:"Add Question"}):Object(c.jsx)(k.a,{onClick:K,children:Object(c.jsx)(q.a,{})}),Object(c.jsx)(w.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:p.modal,open:m,disableEnforceFocus:!0,children:Object(c.jsxs)("div",{className:p.paper,children:[Object(c.jsxs)("div",{className:"questionCard",children:[Object(c.jsx)("div",{id:"title",children:"Question:"}),Object(c.jsx)("input",{type:"text",autoFocus:!0,value:G,onChange:function(e){return Y(e.target.value)},className:"input-text question",placeholder:"Type Question Here"}),Object(c.jsxs)("select",{id:"select",placeholder:"Select",onChange:function(e){return N(e.target.value)},children:[Object(c.jsx)("option",{className:"selectOp",value:"radio",children:"Single Answer"}),Object(c.jsx)("option",{className:"selectOp",value:"check",children:"Multiple Answers"})]}),Object(c.jsx)("div",{className:"option-div",children:Object(c.jsx)("div",{className:"options",id:"one-op",children:A.map((function(e,t){return Object(c.jsxs)("div",{className:"option",children:[Object(c.jsx)("input",{type:"radio"===y?"radio":"checkbox",disabled:!0,className:"radio-in",name:"option",checked:e.isCorrect}),L===t?Object(c.jsx)("input",{value:D,onChange:function(e){return _(e.target.value)}}):Object(c.jsx)("div",{className:"add-op",children:e.text}),L===t?Object(c.jsx)(C.a,{className:"save-icon",onClick:function(){return function(){var e=Object(z.a)(A);e[L].text=D,P(e),J(-1)}()},children:Object(c.jsx)(Q.a,{})}):Object(c.jsx)(C.a,{className:"edit-icon",onClick:function(){return function(e){-1===L&&(J(e),_(A[e].text))}(t)},children:Object(c.jsx)(q.a,{})}),Object(c.jsx)(C.a,{className:"delete-icon",onClick:function(){!function(e){var t=Object(z.a)(A);t.splice(e,1),P(t),J(-1)}(t)},children:Object(c.jsx)(T.a,{})})]},t)}))})}),Object(c.jsxs)("div",{className:"add-op",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{type:"radio"===y?"radio":"checkbox",ref:W,className:"radio-in",name:"option"}),Object(c.jsx)("input",{type:"text",ref:Z,className:"input-text op-text",placeholder:"Option ".concat(A.length+1)})]}),Object(c.jsx)("input",{type:"submit",className:"add-btn",value:"+ Add",onClick:function(){if(0!==Z.current.value.length){var e=Object(z.a)(A);-1===A.findIndex((function(e){return e.text===Z.current.value}))?("radio"===y&&W.current.checked&&e.forEach((function(e){return e.isCorrect=!1})),e.push({text:Z.current.value,isCorrect:W.current.checked}),Z.current.value="",W.current.checked=!1,P(e)):alert("Option already exists.")}}})]})]}),Object(c.jsxs)("div",{className:p.buttons,children:[Object(c.jsx)("button",{className:"add-btn",onClick:function(){f(!1)},children:"Close"}),Object(c.jsxs)("button",{className:"button",color:"secondary",variant:"contained",onClick:function(e){return function(){var e=Object(z.a)(A);0!==Z.current.value.length&&("radio"===y&&W.current.checked&&e.forEach((function(e){return e.isCorrect=!1})),e.push({text:Z.current.value,isCorrect:W.current.checked})),!G.length&&A.length<2?alert("Please add Question and at least 2 options."):G.length?A.length<2?alert("Number of Options must be greater than 1."):A.filter((function(e){return e.isCorrect})).length<1?alert("No correct option was selected."):(-1!==b?h(G,y,e,b):h(G,y,e),f(!1)):alert("Please add Question.")}()},children:["add"===n?"Add ":"Edit ","Question"]})]})]})})]})}var A=n(10),P=n(56),R=n(7),U=n(30),D=n(305),_=n(306),M=n(299),F=n(304),L=n(297),J=n(322),H=n(298),B=n(329),G=n(300),Y=n(301),Z=n(303),W=n(328),K=n(302);function V(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function X(e,t){return"desc"===e?function(e,n){return V(e,n,t)}:function(e,n){return-V(e,n,t)}}function $(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var c=t(e[0],n[0]);return 0!==c?c:e[1]-n[1]})),n.map((function(e){return e[0]}))}var ee=[{id:"title",numeric:!1,disablePadding:!0,label:"Question"},{id:"options",numeric:!0,disablePadding:!1,label:"Options"},{id:"choice",numeric:!0,disablePadding:!1,label:"Choice"},{id:"edit",numeric:!0,disablePadding:!1,label:"Edit"}];function te(e){var t=e.classes,n=e.onSelectAllClick,i=e.order,s=e.orderBy,a=e.numSelected,r=e.rowCount,o=e.onRequestSort;return Object(c.jsx)(L.a,{children:Object(c.jsxs)(H.a,{children:[Object(c.jsx)(M.a,{padding:"checkbox",children:Object(c.jsx)(W.a,{indeterminate:a>0&&a<r,checked:r>0&&a===r,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),ee.map((function(e){return Object(c.jsx)(M.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:s===e.id&&i,children:Object(c.jsxs)(B.a,{active:s===e.id,direction:s===e.id?i:"asc",onClick:(n=e.id,function(e){o(e,n)}),children:[e.label,s===e.id?Object(c.jsx)("span",{className:t.visuallyHidden,children:"desc"===i?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var ne=Object(S.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(U.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),ce=function(e){var t=ne(),n=e.numSelected,i=e.selected,s=e.setSelected,a=e.questionArray,r=e.setQuestionArray;return Object(c.jsxs)(G.a,{className:Object(R.a)(t.root,Object(P.a)({},t.highlight,n>0)),children:[n>0?Object(c.jsxs)(Y.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):Object(c.jsx)(Y.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"QUESTIONS"}),n>0?Object(c.jsx)(k.a,{onClick:function(){var e=Object(z.a)(a);i.forEach((function(t){var n=e.findIndex((function(e){return e.title===t}));e.splice(n,1)})),r(e),s([])},"aria-label":"delete",children:Object(c.jsx)(K.a,{})}):null]})},ie=Object(S.a)((function(e){return{root:{width:"95%",margin:"5px"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function se(e){var t=e.questionArray,n=e.setQuestionArray,i=t.map((function(e){return t=e.title,n=e.options,c=e.optionType,{title:t,options:n,choice:c};var t,n,c})),a=ie(),r=s.a.useState("asc"),o=Object(d.a)(r,2),l=o[0],u=o[1],j=s.a.useState(""),b=Object(d.a)(j,2),h=b[0],p=b[1],O=s.a.useState([]),x=Object(d.a)(O,2),m=x[0],f=x[1],v=s.a.useState(0),g=Object(d.a)(v,2),y=g[0],N=g[1],S=function(e,c,i,s){var a=Object(z.a)(t);a[s]=Object(A.a)(Object(A.a)({},a[s]),{},{title:e,optionType:c,options:i}),n(a)},k=5-Math.min(5,i.length-5*y);return Object(c.jsx)("div",{className:a.root,children:Object(c.jsxs)(Z.a,{className:a.paper,children:[Object(c.jsx)(ce,{numSelected:m.length,selected:m,setSelected:f,questionArray:t,setQuestionArray:n}),Object(c.jsx)(F.a,{children:Object(c.jsxs)(D.a,{className:a.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:[Object(c.jsx)(te,{classes:a,numSelected:m.length,order:l,orderBy:h,onSelectAllClick:function(e){if(e.target.checked){var t=i.map((function(e){return e.title}));f(t)}else f([])},onRequestSort:function(e,t){u(h===t&&"asc"===l?"desc":"asc"),p(t)},rowCount:i.length}),Object(c.jsxs)(_.a,{children:[$(i,X(l,h)).slice(5*y,5*y+5).map((function(e,t){var n,i=(n=e.title,-1!==m.indexOf(n)),s="enhanced-table-checkbox-".concat(t);return Object(c.jsxs)(H.a,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,children:[Object(c.jsx)(M.a,{padding:"checkbox",children:Object(c.jsx)(W.a,{onClick:function(t){return function(e,t){var n=m.indexOf(t),c=[];-1===n?c=c.concat(m,t):0===n?c=c.concat(m.slice(1)):n===m.length-1?c=c.concat(m.slice(0,-1)):n>0&&(c=c.concat(m.slice(0,n),m.slice(n+1))),f(c)}(0,e.title)},checked:i,inputProps:{"aria-labelledby":s}})}),Object(c.jsx)(M.a,{component:"th",id:s,scope:"row",padding:"none",children:e.title}),Object(c.jsx)(M.a,{align:"right",children:e.options.length}),Object(c.jsx)(M.a,{align:"right",children:"radio"===e.choice?"Single":"Multiple"}),Object(c.jsx)(M.a,{align:"right",children:Object(c.jsx)(E,{type:"edit",title:e.title,opType:e.choice,opArray:e.options,index:t,addQuestionHandle:S},t)})]},e.title)})),k>0&&Object(c.jsx)(H.a,{style:{height:33*k},children:Object(c.jsx)(M.a,{colSpan:6})})]})]})}),Object(c.jsx)(J.a,{rowsPerPageOptions:[5],component:"div",count:i.length,rowsPerPage:5,page:y,onChangePage:function(e,t){N(t)}})]})})}var ae,re=n(308),oe=function(e){var t=e.user,n=e.quizTitle,s=e.questions,a=e.isOpen,r=e.editQuizHandle,o=e.showToast,h=Object(i.useState)([]),p=Object(d.a)(h,2),O=p[0],x=p[1],m=Object(i.useState)(""),f=Object(d.a)(m,2),v=f[0],g=f[1],N=Object(i.useState)(!0),S=Object(d.a)(N,2),k=S[0],w=S[1],C=Object(i.useState)("stop"),q=Object(d.a)(C,2),Q=q[0],T=q[1],I=Object(i.useState)(null),A=Object(d.a)(I,2),P=A[0],R=A[1];Object(i.useEffect)((function(){n&&(g(n),x(s),w(a))}),[n,s,a]);var U=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.length||O.length){e.next=5;break}return alert("Please add title and questions."),e.abrupt("return");case 5:if(v.length){e.next=10;break}return alert("Please add Quiz title."),e.abrupt("return");case 10:if(O.length){e.next=13;break}return alert("Please add any questions."),e.abrupt("return");case 13:return T("start"),e.prev=14,e.next=17,fetch("/API/quizzes/create",{method:"POST",body:JSON.stringify({title:v,uid:t.uid,questions:O,isOpen:k}),headers:{"Content-Type":"application/json"}});case 17:return n=e.sent,e.next=20,n.json();case 20:c=e.sent,R(c.quizId),o("Create Quiz","Success"),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),T("error");case 28:case"end":return e.stop()}}),e,null,[[14,25]])})));return function(){return e.apply(this,arguments)}}();return P?Object(c.jsx)(j.a,{push:!0,to:"/created-successfully/".concat(P)}):"start"===Q?Object(c.jsx)(y,{}):Object(c.jsxs)("div",{id:"main-body",children:[Object(c.jsxs)("div",{id:"create-quiz-body",children:[Object(c.jsx)("div",{className:"quiz-header",children:Object(c.jsxs)(b.a,{children:[Object(c.jsx)("input",{type:"text",className:"input-text",value:v,onChange:function(e){return g(e.target.value)},id:"quiz-title",placeholder:"Untitled Quiz",autoFocus:!0,autocomplete:"off",style:{width:"50%"}}),Object(c.jsx)("div",{children:"Subject"}),Object(c.jsxs)("select",{style:{width:"100px"},children:[Object(c.jsx)("option",{children:"Qur'an"}),Object(c.jsx)("option",{children:"Arabic"}),Object(c.jsx)("option",{children:"Islamic Studies"})]}),Object(c.jsx)(re.a,{checked:k,onChange:function(e){return w(e.target.checked)},color:"secondary",name:"access"})]})}),Object(c.jsxs)("div",{className:"controls",children:[Object(c.jsx)(E,{addQuestionHandle:function(e,t,n){var c=Object(z.a)(O);c.push({title:e,optionType:t,options:n}),x(c)}}),Object(c.jsx)("div",{className:"switch",children:Object(c.jsx)("h4",{children:k?"Public":"Private"})})]})]}),Object(c.jsx)("div",{className:"questionTable",children:Object(c.jsx)(se,{questionArray:O,setQuestionArray:x})}),Object(c.jsxs)("div",{children:[n&&Object(c.jsx)("button",{className:"add-btn",onClick:function(){return r()},children:"Close"}),Object(c.jsxs)("button",{className:"button wd-200",onClick:function(){n?r(v,O,k):U()},children:[n?"Save ":"Create ","Quiz"]})]})]})},le=(n(216),function(){var e=Object(i.useState)("false"),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(i.useState)(""),r=Object(d.a)(a,2),o=r[0],l=r[1],u=Object(i.useState)(void 0!=localStorage.getItem("username")),b=Object(d.a)(u,2),h=(b[0],b[1],function(){o.length&&s("attempt-quiz")});return void 0==localStorage.getItem("username")?Object(c.jsx)(j.a,{to:"/name"}):"false"!==n?Object(c.jsx)(j.a,{push:!0,to:"/".concat(n,"/").concat(o,"/0")}):Object(c.jsx)("div",{id:"join-quiz",children:Object(c.jsxs)("div",{id:"join-quiz-div",children:[Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{style:{fontweight:600},children:"Quiz"})}),Object(c.jsx)("input",{value:o,onChange:function(e){return l(e.target.value)},id:"q-code",type:"text",placeholder:"Enter Quiz Code",autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&h()}}),Object(c.jsx)("button",{className:"button wd-200",onClick:h,children:"Join Quiz"})]})})}),ue=(n(120),n(121),n(327)),de=n(324),je=n(146),be=function(e){var t=e.title,n=e.code,i=e.questions,s=e.isOpen,a=e.index,r=e.setEditQuiz,o=e.deleteQuiz;return Object(c.jsxs)(ue.a,{style:{width:"18rem"},className:"m-4",children:[Object(c.jsx)(ue.a.Img,{variant:"top",src:"/Quiz/download.jpg"}),Object(c.jsxs)(ue.a.Body,{className:"myCard",children:[Object(c.jsxs)(ue.a.Title,{children:[t.length<15?t:t.substr(0,12)+"...","(",i,")"]}),Object(c.jsxs)(de.a,{className:"myCard",children:[Object(c.jsx)(je.a,{className:"myCard",children:n}),Object(c.jsx)(je.a,{className:"myCard",children:s?"Opened":"Not Opened"}),Object(c.jsxs)(je.a,{className:"myCard",children:[Object(c.jsx)(k.a,{onClick:function(){return r([a])},children:Object(c.jsx)(q.a,{})}),Object(c.jsx)(k.a,{onClick:function(){return o(a)},children:Object(c.jsx)(T.a,{})})]})]})]})]})},he=n(309),pe=function(e){var t=e.title,n=e.questions,i=e.id,s=e.joinQuiz;return Object(c.jsxs)(ue.a,{style:{width:"18rem"},className:"m-4",children:[Object(c.jsx)(ue.a.Img,{variant:"top",src:"/Quiz/download.jpg"}),Object(c.jsx)(ue.a.Body,{className:"myCard",children:Object(c.jsxs)(ue.a.Title,{children:[t.length<15?t:t.substr(0,12)+"...","(",n,")"]})}),Object(c.jsxs)(de.a,{className:"myCard list-group-flush",children:[Object(c.jsx)(je.a,{className:"myCard",children:i}),Object(c.jsx)(je.a,{className:"myCard",children:Object(c.jsx)(he.a,{variant:"success",onClick:function(e){return s(i)},style:{height:"38px",width:"100%"},children:"Join"})})]})]})},Oe=n(323),xe=function(e){var t=e.user,n=Object(i.useState)([]),s=Object(d.a)(n,2),a=s[0],r=s[1],o=Object(i.useState)(!0),b=Object(d.a)(o,2),h=b[0],p=b[1],O=Object(i.useState)([]),x=Object(d.a)(O,2),m=x[0],f=x[1],v=Object(i.useState)([]),g=Object(d.a)(v,2),N=g[0],S=g[1],k=Object(i.useState)(""),w=Object(d.a)(k,2),C=w[0],q=w[1];Object(i.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.uid){e.next=8;break}return e.next=3,fetch("/API/users/".concat(t.uid));case 3:return n=e.sent,e.next=6,n.json();case 6:(c=e.sent).createdQuiz&&r(c.createdQuiz);case 8:return e.next=10,fetch("/API/quizzes",{method:"GET",headers:{"Content-Type":"application/json"}});case 10:return n=e.sent,e.next=13,n.json();case 13:(c=e.sent).quizData&&S(c.quizData),p(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var Q=function(){var e=Object(u.a)(l.a.mark((function e(n,c,i){var s,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}f([]),e.next=20;break;case 4:return p(!0),console.dir({quizId:a[m]._id,uid:t.uid,title:n,questions:c,isOpen:i}),e.next=8,fetch("/API/quizzes/edit",{method:"POST",body:JSON.stringify({quizId:a[m]._id,uid:t.uid,title:n,questions:c,isOpen:i}),headers:{"Content-Type":"application/json"}});case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,console.dir(o),(u=Object(z.a)(a))[m[0]].title=n,u[m[0]].questions=c,u[m[0]].isOpen=i,r(u),f([]),p(!1);case 20:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return h?Object(c.jsx)(y,{}):C?void 0==localStorage.getItem("username")?Object(c.jsx)(j.a,{push:!0,to:"join-quiz"}):Object(c.jsx)(j.a,{push:!0,to:"/attempt-quiz/".concat(C)}):m.length?Object(c.jsx)(oe,{user:t,quizTitle:a[m].title,questions:a[m].questions,isOpen:a[m].isOpen,editQuizHandle:Q}):Object(c.jsx)("div",{className:"dash-body",children:Object(c.jsx)("div",{className:"quizzes",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)(Oe.a,{style:{height:"100%"},children:[Object(c.jsxs)(Oe.a.Item,{interval:4e3,children:[Object(c.jsx)("img",{className:"d-block w-100",style:{width:"100%",height:"auto"},src:"/Quiz/dashboard/dashboard-1.jpg",alt:"First slide"}),Object(c.jsxs)(Oe.a.Caption,{children:[Object(c.jsx)("h3",{children:"First Slide"}),Object(c.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."})]})]}),Object(c.jsxs)(Oe.a.Item,{interval:4e3,children:[Object(c.jsx)("img",{className:"d-block",style:{width:"100%",height:"auto"},src:"/Quiz/dashboard/dashboard-2.jpg",alt:"Second slide"}),Object(c.jsxs)(Oe.a.Caption,{children:[Object(c.jsx)("h3",{children:"Second slide label"}),Object(c.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."})]})]}),Object(c.jsxs)(Oe.a.Item,{interval:4e3,children:[Object(c.jsx)("img",{className:"d-block",style:{width:"100%",height:"auto"},src:"/Quiz/dashboard/dashboard-3.jpg",alt:"Third slide"}),Object(c.jsxs)(Oe.a.Caption,{children:[Object(c.jsx)("h3",{children:"Third slide label"}),Object(c.jsx)("p",{children:"Praesent commodo cursus magna, vel scelerisque nisl consectetur."})]})]})]}),Object(c.jsx)("div",{className:"card-holder",style:{justifyContent:"center"},children:N.map((function(e,t){return Object(c.jsx)(pe,{title:e.title,questions:e.questions.length,id:e._id,joinQuiz:q},t)}))})]})})})},me=n(19),fe=(n(218),n(150)),ve=function(e){var t=e.match,n=Object(i.useState)("copy"),s=Object(d.a)(n,2),a=s[0],r=s[1];return Object(c.jsx)("div",{id:"created-quiz",children:Object(c.jsxs)("div",{id:"created-quiz-div",children:[Object(c.jsxs)("div",{id:"message",children:[Object(c.jsx)("h2",{className:"b",children:"Quiz Created Successfully!"}),Object(c.jsx)("p",{children:"Share the following code with your students"})]}),Object(c.jsx)("input",{type:"text",id:a,value:t.params.quizCode,disabled:!0}),Object(c.jsx)(fe.CopyToClipboard,{text:t.params.quizCode,onCopy:function(){r("copied")},children:Object(c.jsx)("button",{className:"button wd-200",children:"copy"===a?"Copy Code":"Code Copied!"})}),Object(c.jsx)(me.b,{to:"/dashboard",children:Object(c.jsx)("button",{className:"button wd-200",children:"Dashboard"})})]})})},ge=function(){return Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("h1",{children:"404 Page Not Found!"}),Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{children:"Quiz"})}),Object(c.jsxs)("h3",{children:["Who told you to mess up with the URL? ",Object(c.jsx)(me.b,{to:"/",children:"Click here"})," and Go back to the Dashboard."]})]})},ye=n(151),Ne=n(152),ze=n(96),Se=n(155),ke=n(154),we=n(312),Ce=n(153),qe=n(310),Qe=n(311),Te=Object(S.a)((function(e){return{root:{},modal:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(10,10),borderRadius:"20px"},buttons:{display:"flex",justifyContent:"flex-end"}}})),Ie=function(e){var t=e.result,n=e.totalScore,s=e.showModal,a=Te(),r=Object(i.useState)(s),o=Object(d.a)(r,2),l=o[0],u=o[1];return Object(i.useEffect)((function(){u(s)}),[s]),Object(c.jsx)("div",{className:a.root,children:Object(c.jsx)(w.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:l,disableEnforceFocus:!0,children:Object(c.jsxs)("div",{className:a.paper,children:[Object(c.jsx)("h2",{children:"Quiz Attempted Successfully."}),Object(c.jsx)("h1",{className:"score_h2",children:t.error?"Not Submitted ! ":"Score: ".concat(t,"/").concat(n)}),Object(c.jsxs)("div",{id:"row",children:[Object(c.jsx)(me.b,{to:"/dashboard",children:Object(c.jsx)("button",{className:"button wd-200",children:"Dashboard"})}),Object(c.jsx)("button",{className:"button wd-200",onClick:function(){return u(!1)},children:"Return"})]})]})})})},Ee=(n(251),function(e){Object(Se.a)(n,e);var t=Object(ke.a)(n);function n(e){var i;return Object(ye.a)(this,n),(i=t.call(this,e)).handleOptionSelect=function(e,t){var n,c=i.state,s=c.attemptedQuestions,a=c.questions,r=Object(z.a)(s);n=r.length>=t-1?r[t].selectedOptions:[],"radio"===s[t].optionType?n[0]=e:n.find((function(t){return t===e}))?n.splice(n.findIndex((function(t){return t===e})),1):n.push(e),r[t].selectedOptions=n;var o=i.getMark(r,t);if("radio"===s[t].optionType){var l=i.evaluateQuiz(a,r);ae.emit("mark",{id:localStorage.getItem("id"),currentScore:l}),i.setState({attemptedQuestions:r,time:t<a.length-1,mark:1===o?1:2,showMark:!0,score:l}),setTimeout((function(){return i.increaseNumber()}),1500)}else"check"===s[t].optionType&&i.setState({attemptedQuestions:Object(z.a)(r)})},i.getMark=function(e,t){var n=i.state.questions,c=n[t].options.filter((function(e){return e.isCorrect})),s=n[t];if(c.length<1)return 0;var a=1/c.length,r=0;return c.length<e[t].selectedOptions.length&&(r-=(s.selectedOptions.length-c.length)*a),e[t].selectedOptions.forEach((function(e){void 0!==c.find((function(t){return t.text===e}))&&(r+=a)})),r<1?0:1},i.checkNext=function(){var e=i.state,t=e.attemptedQuestions,n=e.questions,c=e.number,s=i.getMark(t,c);if("check"===t[c].optionType){var a=i.evaluateQuiz(n,t);ae.emit("mark",{id:localStorage.getItem("id"),currentScore:a}),i.setState({mark:1===s?1:2,showMark:!0,score:a}),setTimeout((function(){return i.increaseNumber()}),1500)}},i.increaseNumber=function(){var e=i.state,t=e.number,n=e.questions,c=e.attemptedQuestions;t<n.length-1?i.setState({number:t+1,showMark:!1,mark:0}):(i.setState({showModal:!0,result:i.evaluateQuiz(n,c),showMark:!1}),setTimeout((function(){return i.increaseNumber()}),1500))},i.submitQuiz=Object(u.a)(l.a.mark((function e(){var t,n,c,s,a,r,o,u,d,j,b,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.state,t.quizCode,t.attemptedQuestions,e.prev=1,n=i.state,c=n.questions,s=n.attemptedQuestions,a=n.number,r=i.evaluateQuiz(c,s),i.setState({score:r}),o=c[a],u=o.options.filter((function(e){return e.isCorrect})),d=c[a],!(u.length<1)){e.next=10;break}return e.abrupt("return",0);case 10:b=1/u.length,h=0,u.length<s[a].selectedOptions.length&&(h-=(d.selectedOptions.length-u.length)*b),s[a].selectedOptions.forEach((function(e){void 0!==u.find((function(t){return t.text===e}))&&(h+=b)})),j=h<1?2:1,i.setState({showModal:!0,time:!1,mark:j}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log("Error Submitting quiz",e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])}))),i.evaluateQuiz=function(e,t){var n=0;return t.forEach((function(t){var c=e.find((function(e){return e.id===t.id})),i=c.options.filter((function(e){return e.isCorrect}));if(i.length<1)return 0;var s=t.selectedOptions;if("check"===c.optionType){for(var a=0,r=function(e){i.find((function(t){return t.text==s[e]}))&&++a},o=0;o<s.length;++o)r(o);a===i.length&&++n}else"radio"===c.optionType&&i[0].text===s[0]&&++n})),n.toFixed(0)},i.hideModal=function(){i.setState({showModal:!1,mark:0,number:i.state.number+1})},i.handleMusic=function(){var e=i.state.music;e?i.audio.pause():i.audio.play(),i.setState({music:!e})},i.render=function(){var e=i.state,t=e.number,n=e.questions,s=e.attemptedQuestions,a=e.quizTitle,r=e.loading,o=e.result,l=e.path,u=e.showModal,d=e.score,b=(e.time,e.mark),h=e.students,p=(e.showMark,e.music),O=Object(ze.a)(i),x=O.handleOptionSelect,m=(O.submitQuiz,O.increaseNumber,O.hideModal,O.checkNext),f=i.props.match.params.quizCode;if(r)return Object(c.jsx)(y,{});if("ERR:QUIZ_NOT_FOUND"===a)return Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("h1",{children:"404 Quiz Not Found!"}),Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{children:"Quiz"})}),Object(c.jsxs)("h3",{children:["Go back to ",Object(c.jsx)(me.b,{to:"/join-quiz",children:"Join Quiz "}),"Page."]})]});if(l)return Object(c.jsx)(j.a,{push:!0,to:"/attempt-quiz/".concat(f,"/").concat(l)});if("ERR:QUIZ_ACCESS_DENIED"===a)return Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("h2",{children:"Quiz Access is Not Granted by the Creator. Please contact Quiz Creator."}),Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{children:"Quiz"})}),Object(c.jsxs)("h3",{children:["Go back to ",Object(c.jsx)(me.b,{to:"/join-quiz",children:"Join Quiz "}),"Page."]})]});if("ERR:QUIZ_ALREADY_ATTEMPTED"===a)return Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("h2",{children:"You have already taken the Quiz."}),Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{children:"Quiz"})}),Object(c.jsxs)("h3",{children:["Go back to ",Object(c.jsx)(me.b,{to:"/join-quiz",children:"Join Quiz "}),"Page."]})]});var v=n[t],g=s.length>t?s[t].selectedOptions:[];return console.log("students:",h),Object(c.jsx)("div",{id:"main-body",className:"flex-container grow",children:Object(c.jsxs)("div",{className:"flex-horizontal-container grow",children:[Object(c.jsxs)("div",{id:"create-quiz-body",className:"flex-container grow",style:{flexGrow:"1",marginTop:"100px",marginBottom:"50px"},children:[Object(c.jsxs)("div",{className:"attemptQuestionCard theme-classic flex-container grow",style:{backgroundColor:"#294634"},children:[Object(c.jsxs)("div",{className:"fixed",style:{height:"60px",display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(c.jsxs)("div",{className:"topText",children:["Quiz ",t+1,"/",n.length]}),Object(c.jsx)(C.a,{onClick:function(e){return i.handleMusic()},style:{height:"60px"},children:p?Object(c.jsx)(qe.a,{fontSize:"large"}):Object(c.jsx)(Qe.a,{fontSize:"large"})}),Object(c.jsxs)("div",{className:"topText",children:["Score:",d]})]}),Object(c.jsx)("div",{className:"grow vertical-center puzzle-text",children:v.title}),0===b?Object(c.jsx)("div",{className:"option-div options-grid grow",style:{display:"flex",flexDirection:"row",width:"100%"},children:v.options.map((function(e,n){return Object(c.jsx)("div",{className:"option is-mcq myoption-text is-selected option-pressed ",style:{width:"100%"},children:Object(c.jsxs)("div",{className:"option-inner vertical-center puzzle-text option-pressed is-selected theme-option-container",style:{width:"100%"},name:"option".concat(t),checked:g.findIndex((function(t){return t===e.text}))>=0,onClick:function(n){return x(e.text,t)},children:[e.text,"check"===v.optionType&&Object(c.jsx)("span",{className:"select-icon-wrapper flex-view all-center is-selected"+(g.findIndex((function(t){return t===e.text}))>=0?" pink-background option-selected":""),children:Object(c.jsx)("span",{className:"icon"})})]})},n)}))}):Object(c.jsx)("div",{className:"option-div options-grid grow",style:{display:"flex",flexDirection:"row",width:"100%"},children:v.options.map((function(e,n){return Object(c.jsx)("div",{className:"option is-mcq myoption-text is-selected option-pressed "+(e.isCorrect?"right-color ":"")+(!1===e.isCorrect&&g.findIndex((function(t){return t===e.text}))>=0?"wrong-color ":""),style:{width:"100%"},children:(e.isCorrect||g.findIndex((function(t){return t===e.text}))>=0)&&Object(c.jsxs)("div",{className:"option-inner vertical-center puzzle-text option-pressed is-selected theme-option-container",style:{width:"100%"},name:"option".concat(t),checked:g.findIndex((function(t){return t===e.text}))>=0,onClick:function(n){return x(e.text,t)},children:[e.text,"check"===v.optionType&&Object(c.jsx)("span",{className:"select-icon-wrapper flex-view all-center is-selected "+(g.findIndex((function(t){return t===e.text}))>=0?"pink-background":""),children:Object(c.jsx)("span",{className:"icon "+(g.findIndex((function(t){return t===e.text}))>=0?"option-selected":"")})})]})},n)}))}),Object(c.jsxs)("div",{className:"fixed",style:{height:"70px"},children:[t===n.length-1&&"check"===v.optionType&&Object(c.jsx)("button",{className:"button wd-200",onClick:function(e){return m()},children:"Submit"}),"check"===v.optionType&&t<n.length-1&&Object(c.jsx)("button",{className:"button wd-200",onClick:function(e){return m()},children:"Next"})]}),1===b?Object(c.jsx)("div",{className:"fixed mycorrect-answer vertical-center puzzle-text",children:"Correct"}):2==b?Object(c.jsx)("div",{className:"fixed mywrong-answer vertical-center puzzle-text",children:"Wrong"}):""]}),Object(c.jsx)(Ie,{result:o,totalScore:n.length,showModal:u})]}),Object(c.jsx)("div",{className:"grow",style:{flexGrow:"0",width:"280px",marginTop:"110px",overflow:"visible",height:"".concat(window.innerHeight-170)},children:Object(c.jsx)(de.a,{children:h.map((function(e,t){return Object(c.jsxs)(de.a.Item,{style:{display:"flex",justifyContent:"space-between"},variant:e.id===ae.id?"primary":"secondary",children:["".concat(t+1,".").concat(e.name.length<15?e.name:e.name.substr(0,12)+"..."),Object(c.jsx)(we.a,{pill:!0,bg:"primary",children:e.mark})]})}))})})]})})},i.state={number:0,questions:[],attemptedQuestions:[],quizTitle:"",loading:!0,result:{},showModal:!1,path:"",quizCode:"",score:0,time:!0,mark:0,students:[],showMark:!1,music:!0},i.url="/Music.wav",i.audio=new Audio(i.url),i.audio.play(),i.audio.addEventListener("ended",(function(){this.audio.play()}),!1),i}return Object(Ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,c,i,s,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.quizCode,e.next=3,fetch("/API/quizzes/join",{method:"POST",body:JSON.stringify({quizId:t}),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:(c=e.sent).error?this.setState({quizTitle:c.error,loading:!1}):(ae=Ce.connect("ws://localhost:3000"),i=localStorage.getItem("username"),ae.emit("login",{username:i,quizCode:t}),ae.on("mark",(function(e){a.setState({students:e})})),s=c.questions.map((function(e){return{id:e.id,title:e.title,optionType:e.optionType,selectedOptions:[]}})),this.setState({quizTitle:c.title,questions:c.questions,loading:!1,attemptedQuestions:s,quizCode:t}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){ae.close(),this.audio.pause()}}]),n}(s.a.Component)),Ae=n(319),Pe=(n(252),n(253),n(313)),Re=n(314),Ue=n(315),De=n(316),_e=n(317),Me=n(318);var Fe=function(e){var t=e.setUsername,n=(e.setPath,Object(i.useState)(!1)),s=Object(d.a)(n,2),a=s[0],r=s[1],o=[{title:"Dashboard",path:"/dashboard",icon:Object(c.jsx)(Pe.a,{}),CName:"nav-text"},{title:"Join Quiz",path:"/join-quiz",icon:Object(c.jsx)(Re.a,{}),CName:"nav-text"},{title:"Create Quiz",path:"/create-quiz",icon:Object(c.jsx)(Ue.a,{}),CName:"nav-text"}],l=Object(i.useState)(!1),u=Object(d.a)(l,2),b=u[0],h=u[1],p=function(){return h(!b)};return a?(m.auth().currentUser&&m.auth().signOut(),localStorage.removeItem("username"),localStorage.removeItem("id"),t(""),Object(c.jsx)(j.a,{to:"/"})):Object(c.jsxs)("div",{children:[Object(c.jsx)(C.a,{className:"menu-bars",onClick:function(e){return p()},children:Object(c.jsx)(De.a,{})}),Object(c.jsx)("nav",{className:b?"nav-menu active":"nav-menu",children:Object(c.jsxs)("ul",{className:"nav-menu-items",onClick:function(e){return p()},children:[Object(c.jsx)("li",{className:"navbar-toggle",children:Object(c.jsx)(C.a,{children:Object(c.jsx)(_e.a,{fontSize:"large"})})}),o.map((function(e,t){return(t<2||!!m.auth().currentUser)&&Object(c.jsx)("li",{className:"nav-text",children:Object(c.jsxs)(me.b,{to:e.path,children:[Object(c.jsx)(C.a,{style:{height:"40px"},children:e.icon}),Object(c.jsx)("span",{className:"nav-item-title",children:e.title})]})},t)})),(!!m.auth().currentUser||!!localStorage.getItem("username"))&&Object(c.jsx)("li",{className:"nav-text sign-out",style:{display:"flex",justifyContent:"left"},children:Object(c.jsxs)("button",{onClick:function(){return r(!0)},children:[Object(c.jsx)(C.a,{style:{height:"40px"},children:Object(c.jsx)(Me.a,{})}),Object(c.jsx)("span",{className:"nav-item-title",children:"SignOut"})]})})]})})]})},Le=function(e){e.user,e.setUser;var t=e.setUsername,n=localStorage.getItem("username");return Object(c.jsxs)("div",{className:"appBar",children:[Object(c.jsxs)("div",{className:"slider",children:[Object(c.jsx)(Fe,{setUsername:t}),Object(c.jsx)(me.b,{to:"/",className:"home",children:Object(c.jsx)("b",{children:"Quiz"})})]}),Object(c.jsx)("div",{className:"appBar-user",style:{marginRight:"80px"},children:Object(c.jsxs)("div",{id:"row",style:{height:"100%"},children:[!m.auth().currentUser&&Object(c.jsx)(me.b,{to:"/admin",className:"admin vertical-center",children:Object(c.jsx)("b",{children:"Admin"})}),!!n&&Object(c.jsx)("div",{style:{marginRight:"10px",paddingTop:"10px"},children:Object(c.jsx)(C.a,{children:Object(c.jsx)(Ae.a,{})})}),Object(c.jsx)("div",{className:"vertical-center",children:Object(c.jsx)("div",{children:n})})]})})]})},Je=n(11),He=Object(Je.a)((function(e){return{head:{backgroundColor:"#d81e5b",color:e.palette.common.white},body:{fontSize:14}}}))(M.a),Be=Object(Je.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(H.a);var Ge=Object(S.a)({table:{minWidth:500},paper:{borderRadius:15}});function Ye(e){var t=e.responses,n=Ge(),i=t.map((function(e){return{name:(t=e).name,email:t.email,score:t.score};var t}));return Object(c.jsx)(F.a,{className:n.paper,component:Z.a,children:Object(c.jsxs)(D.a,{className:n.table,"aria-label":"customized table",children:[Object(c.jsx)(L.a,{children:Object(c.jsxs)(H.a,{children:[Object(c.jsx)(He,{children:"Name"}),Object(c.jsx)(He,{align:"center",children:"Email Address"}),Object(c.jsx)(He,{align:"right",children:"Score"})]})}),Object(c.jsx)(_.a,{children:i.map((function(e){return Object(c.jsxs)(Be,{children:[Object(c.jsx)(He,{component:"th",scope:"row",children:e.name}),Object(c.jsx)(He,{align:"center",children:e.email}),Object(c.jsx)(He,{align:"right",children:e.score})]},e.name)}))})]})})}var Ze=function(e){var t=e.match.params.quizCode,n=m.auth().currentUser.uid,s=Object(i.useState)(!0),a=Object(d.a)(s,2),r=a[0],o=a[1],j=Object(i.useState)([]),b=Object(d.a)(j,2),h=b[0],p=b[1];return Object(i.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/API/quizzes/responses",{method:"POST",body:JSON.stringify({quizCode:t,uid:n}),headers:{"Content-Type":"application/json"}});case 2:return c=e.sent,e.next=5,c.json();case 5:i=e.sent,p(i.finalResponse),o(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n]),r?Object(c.jsx)(y,{}):Object(c.jsxs)("div",{className:"margin-top",children:[Object(c.jsx)("h2",{children:"Responses"}),Object(c.jsx)(Ye,{responses:h})]})},We=n(66),Ke=n.n(We),Ve=function(e){var t,n=e.match,a=Object(i.useState)([]),r=Object(d.a)(a,2),o=r[0],j=r[1],b=function(e){return Z.current.speak(new SpeechSynthesisUtterance(e))},h=Object(i.useState)(0),p=Object(d.a)(h,2),O=p[0],x=p[1],f=n.params.quizCode,v=Object(i.useState)([]),g=Object(d.a)(v,2),N=g[0],S=g[1],k=Object(i.useState)([]),w=Object(d.a)(k,2),C=w[0],q=w[1],Q=Object(i.useState)(""),T=Object(d.a)(Q,2),I=T[0],E=T[1],A=Object(i.useState)(!0),P=Object(d.a)(A,2),R=P[0],U=P[1],D=Object(i.useState)({}),_=Object(d.a)(D,2),M=_[0],F=_[1],L=Object(i.useState)(!1),J=Object(d.a)(L,2),H=J[0],B=J[1];m.auth().currentUser&&(t=m.auth().currentUser.uid);var G=Object(We.useSpeechRecognition)({commands:o}),Y=(G.transcript,G.resetTranscript),Z=s.a.useRef(window.speechSynthesis),W=s.a.useCallback((function(e){32===e.keyCode&&("ERR:QUIZ_NOT_FOUND"===I?b("The quiz you requested was not found."):"ERR:QUIZ_ACCESS_DENIED"===I?b("Access is not granted by the creator."):"ERR:QUIZ_ALREADY_ATTEMPTED"===I?b("You have already attempted this quiz."):(Ke.a.startListening({continuous:!0}),b("Listening Started."),Y()))}),[Y,I]);Object(i.useEffect)((function(){return Ke.a.browserSupportsSpeechRecognition()?document.addEventListener("keydown",W):alert("Oops, your browser is not supported!"),function(){document.removeEventListener("keydown",W),Ke.a.abortListening()}}),[W]),Object(i.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/API/quizzes/join",{method:"POST",body:JSON.stringify({quizId:f}),headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,U(!1),n.error?(E(n.error),"ERR:QUIZ_NOT_FOUND"===n.error?b("The quiz you requested was not found."):"ERR:QUIZ_ACCESS_DENIED"===n.error?b("Access is not granted by the creator."):"ERR:QUIZ_ALREADY_ATTEMPTED"===n.error&&b("You have already attempted this quiz.")):(E(n.title),S(n.questions),c=n.questions.map((function(e){return{id:e.id,title:e.title,optionType:e.optionType,selectedOptions:[]}})),q(c));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[f]);var K=s.a.useCallback(Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/API/quizzes/submit",{method:"POST",body:JSON.stringify({uid:t,quizId:f,questions:C}),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,F(c),B(!0),"ERR:QUIZ_ALREADY_ATTEMPTED"===c.error?b("The Quiz has already been submitted."):b("Your score is ".concat(c.score," out of ").concat(C.length)),Ke.a.abortListening(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("Error Submitting quiz",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),[f,C,t]);Object(i.useEffect)((function(){var e=function(e){b("Question number ".concat(e+1,":")),b(N[e].title);var t="radio"===N[e].optionType?" only 1 option.":" multiple options.";b("You can choose "+t),N[e].options.forEach((function(e,t){b("Option ".concat(t+1," : ").concat(e.text))}))};j([{command:["reset","cancel"],callback:function(){Z.current.cancel(),Y()}},{command:"Instructions",callback:function(){b("Use the following voice commands to interact with the application. Start Quiz to initialize the quiz. Repeat the current question command to repeat the focused question. Select or choose option number command for choosing the correct option. Next question to move to the next consecutive question and Previous Question to move to the previous consecutive question."),Y()}},{command:["(*) title","(*) start (*)"],callback:function(){Z.current.cancel(),b("The Quiz title is: ".concat(I)),e(O),Y()},matchInterim:!0},{command:["select option :option","choose option :option"],callback:function(e){Z.current.cancel(),e>0&&e<=N[O].options.length||["for","to"].some((function(t){return t===e}))?("for"===e?e=4:"to"===e&&(e=2),b("You chose option ".concat(e," : ").concat(N[O].options[e-1].text)),function(e){var t=Object(z.a)(C),n=t[O].selectedOptions;n.includes(e)||("radio"===C[O].optionType?n[0]=e:n.push(e),t[O].selectedOptions=n,q(t))}(N[O].options[e-1].text)):Number.isInteger(e)&&b("No such option as "+e),Y()},matchInterim:!0},{command:"(*) next question",callback:function(){Z.current.cancel(),O<N.length-1?(x(O+1),e(O+1)):b("That was the last Question of the Quiz."),Y()},matchInterim:!0},{command:"(*) previous question",callback:function(){Z.current.cancel(),O>0?(x(O-1),e(O-1)):b("That was the first Question of the Quiz."),Y()},matchInterim:!0},{command:"submit quiz",callback:function(){Object.keys(M).length<=0&&K(),Y()},matchInterim:!0},{command:["(*) repeat question :number"],callback:function(t,n){Z.current.cancel(),n>0&&n<=N.length||["for","to"].some((function(e){return e===n}))?("for"===n?n=4:"to"===n&&(n=2),x(n-1),e(n-1)):b("Question Number not recognized. Kindly repeat it"),Y()},matchInterim:!0},{command:["repeat the current question","repeat the question","repeat question"],callback:function(){Z.current.cancel(),e(O),Y()},matchInterim:!0}])}),[I,Y,N,O,C,K,M]);var V=function(e,t,n){var c=Object(z.a)(C),i=c[n].selectedOptions;if(!i.includes(t)&&e.target.checked&&("radio"===C[n].optionType?i[0]=t:i.push(t)),i.includes(t)&&!e.target.checked){var s=i.indexOf(t);i.splice(s,1)}c[n].selectedOptions=i,q(c)};return R?Object(c.jsx)(y,{}):"ERR:QUIZ_NOT_FOUND"===I?Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("h1",{children:"404 Quiz Not Found!"}),Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{children:"Quiz"})}),Object(c.jsxs)("h3",{children:["Go back to ",Object(c.jsx)(me.b,{to:"/join-quiz",children:"Join Quiz "}),"Page."]})]}):"ERR:QUIZ_ACCESS_DENIED"===I?Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("h2",{children:"Quiz Access is Not Granted by the Creator. Please contact Quiz Creator."}),Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{children:"Quiz"})}),Object(c.jsxs)("h3",{children:["Go back to ",Object(c.jsx)(me.b,{to:"/join-quiz",children:"Join Quiz "}),"Page."]})]}):"ERR:QUIZ_ALREADY_ATTEMPTED"===I?Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("h2",{children:"You have already taken the Quiz."}),Object(c.jsx)("div",{id:"logo-name",children:Object(c.jsx)("b",{children:"Quiz"})}),Object(c.jsxs)("h3",{children:["Go back to ",Object(c.jsx)(me.b,{to:"/join-quiz",children:"Join Quiz "}),"Page."]})]}):Object(c.jsx)("div",{id:"main-body",children:Object(c.jsxs)("div",{id:"create-quiz-body",children:[Object(c.jsx)("div",{className:"quiz-header",children:Object(c.jsx)("h2",{children:I})}),N.map((function(e,t){return Object(c.jsxs)("div",{className:"attemptQuestionCard",children:[Object(c.jsx)("div",{id:"title",children:e.title}),Object(c.jsx)("div",{className:"option-div",children:e.options.map((function(n,i){return Object(c.jsxs)("div",{className:"option",children:["radio"===e.optionType?Object(c.jsx)("input",{type:"radio",name:"option".concat(t),checked:!!C.length&&C[t].selectedOptions.includes(n.text),onChange:function(e){return V(e,n.text,t)}}):Object(c.jsx)("input",{type:"checkbox",name:"option",checked:!!C.length&&C[t].selectedOptions.includes(n.text),onChange:function(e){return V(e,n.text,t)}}),Object(c.jsx)("label",{style:{padding:"0px 5px"},children:n.text})]},i)}))})]},t)})),Object(c.jsx)("button",{className:"button wd-200",onClick:K,children:"Submit"}),Object(c.jsx)(Ie,{result:M,showModal:H,totalScore:N.length})]})})},Xe=Object(S.a)((function(e){return{root:{},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),outline:0,width:"90%",borderRadius:"10px"},buttons:{display:"flex",justifyContent:"flex-end"}}}));function $e(e){var t=e.setUsername,n=Xe(),s=Object(i.useState)(!0),a=Object(d.a)(s,2),r=a[0],o=(a[1],Object(i.useState)("")),b=Object(d.a)(o,2),h=b[0],p=b[1],O=Object(i.useState)(""),x=Object(d.a)(O,2),m=x[0],f=x[1];window.innerHeight,window.innerWidth;Object(i.useEffect)((function(){}),[r]);var v=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=11;break}return e.next=3,fetch("/API/users/login",{method:"POST",body:JSON.stringify({name:m}),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,localStorage.setItem("username",m),localStorage.setItem("id",c.id),t(m),p("/join-quiz");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return localStorage.getItem("username")?Object(c.jsx)(j.a,{push:!0,to:"/"}):h?Object(c.jsx)(j.a,{push:!0,to:h}):Object(c.jsx)(w.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:n.modal,style:{width:"400px",margin:"auto"},open:r,disableEnforceFocus:!0,children:Object(c.jsxs)("div",{className:n.paper,children:[Object(c.jsxs)("div",{className:"questionCard",children:[Object(c.jsx)("div",{id:"title",children:"Name:"}),Object(c.jsx)("input",{type:"text",autoFocus:!0,value:m,onChange:function(e){return f(e.target.value)},className:"input-text question",placeholder:"Type Name Here"})]}),Object(c.jsx)("div",{className:n.buttons,children:Object(c.jsx)("button",{className:"button",color:"secondary",variant:"contained",style:{width:"100%"},onClick:v,children:"Enter"})})]})})}var et=function(e){var t=e.user,n=e.showToast,s=Object(i.useState)([]),a=Object(d.a)(s,2),r=a[0],o=a[1],x=Object(i.useState)(!0),f=Object(d.a)(x,2),v=f[0],g=f[1],N=Object(i.useState)([]),S=Object(d.a)(N,2),k=S[0],w=S[1],C=Object(i.useState)([]),q=Object(d.a)(C,2),Q=q[0],T=q[1],I=Object(i.useState)(""),E=Object(d.a)(I,2),A=E[0],P=E[1],R=Object(i.useState)(!1),U=Object(d.a)(R,2),D=U[0],_=U[1],M=Object(i.useState)(""),F=Object(d.a)(M,2),L=F[0],J=(F[1],Object(i.useState)("")),H=Object(d.a)(J,2),B=H[0];H[1];Object(i.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.uid){e.next=17;break}return e.next=3,fetch("/API/users/".concat(t.uid));case 3:return n=e.sent,e.next=6,n.json();case 6:return(c=e.sent).createdQuiz&&o(c.createdQuiz),console.log("created quiz:",c.createdQuiz),e.next=11,fetch("/API/quizzes");case 11:return n=e.sent,e.next=14,n.json();case 14:c=e.sent,console.log("all quiz:",c),c.quizData&&T(c.quizData);case 17:g(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var G=function(){var e=Object(u.a)(l.a.mark((function e(c,i,s){var a,u,d,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=4;break}w([]),e.next=25;break;case 4:return g(!0),console.dir({quizId:r[k]._id,uid:t.uid,title:c,questions:i,isOpen:s}),e.next=8,fetch("/API/quizzes/edit",{method:"POST",body:JSON.stringify({quizId:r[k]._id,uid:t.uid,title:c,questions:i,isOpen:s}),headers:{"Content-Type":"application/json"}});case 8:return a=e.sent,e.next=11,a.json();case 11:u=e.sent,console.dir(u),(d=Object(z.a)(r))[k[0]].title=c,d[k[0]].questions=i,d[k[0]].isOpen=s,o(d),d=Object(z.a)(Q),j=d.findIndex((function(e){return e._id===r[k]._id})),d.splice(j,1),T(d),w([]),g(!1),n("Edit Quiz","Success");case 25:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,i,s,a,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),c=r[t]._id,e.next=4,fetch("/API/quizzes/".concat(r[t]._id),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,console.dir(s),(a=Object(z.a)(r)).splice(t,1),o(a),a=Object(z.a)(Q),u=a.findIndex((function(e){return e._id===c})),a.splice(u,1),T(a),w([]),g(!1),n("Delete Quiz","Success");case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v?Object(c.jsx)(y,{}):A?void 0==localStorage.getItem("username")?Object(c.jsx)(j.a,{push:!0,to:"join-quiz"}):Object(c.jsx)(j.a,{push:!0,to:"/attempt-quiz/".concat(A)}):k.length?Object(c.jsx)(oe,{user:t,quizTitle:r[k].title,questions:r[k].questions,isOpen:r[k].isOpen,editQuizHandle:G}):Object(c.jsxs)("div",{className:"dash-body",style:{marginTop:"100px"},children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(h.a,{xs:6,children:Object(c.jsx)(p.a,{position:"top-end",className:"p-3",children:Object(c.jsxs)(O.a,{onClose:function(){return _(!1)},show:D,delay:3e3,autohide:!0,animation:!0,children:[Object(c.jsxs)(O.a.Header,{children:[Object(c.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(c.jsx)("strong",{className:"me-auto",children:L})]}),Object(c.jsx)(O.a.Body,{children:B})]})})})}),!!m.auth().currentUser&&Object(c.jsxs)("div",{className:"quizzes",children:[Object(c.jsxs)("div",{className:"heading",children:[Object(c.jsx)("div",{className:"line-left"}),Object(c.jsx)("h2",{children:"My Quiz "}),Object(c.jsx)("div",{className:"line"})]}),Object(c.jsx)("div",{className:"card-holder",style:{justifyContent:"center"},children:r.map((function(e,t){return Object(c.jsx)(be,{index:t,setEditQuiz:w,deleteQuiz:Y,title:e.title,code:e._id,questions:e.questions.length,isOpen:e.isOpen},t)}))}),Object(c.jsxs)("div",{className:"heading",children:[Object(c.jsx)("div",{className:"line-left"}),Object(c.jsx)("h2",{children:"All Quiz "}),Object(c.jsx)("div",{className:"line"})]}),Object(c.jsx)("div",{className:"card-holder",style:{justifyContent:"center"},children:Q.map((function(e,t){return Object(c.jsx)(pe,{title:e.title,questions:e.questions.length,id:e._id,joinQuiz:P},t)}))})]})]})},tt=function(){var e=Object(i.useState)({}),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(i.useState)(localStorage.getItem("username")),r=Object(d.a)(a,2),o=(r[0],r[1]),x=Object(i.useState)(!1),f=Object(d.a)(x,2),v=f[0],g=f[1],y=Object(i.useState)(""),z=Object(d.a)(y,2),S=z[0],k=z[1],w=Object(i.useState)(""),C=Object(d.a)(w,2),q=C[0],Q=C[1];Object(i.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.uid){e.next=10;break}if(m.auth().currentUser.metadata.lastSignInTime!==m.auth().currentUser.metadata.creationTime){e.next=10;break}return e.prev=2,e.next=5,fetch("/API/users/create",{method:"POST",body:JSON.stringify({uid:n.uid,name:n.name,email:n.email}),headers:{"Content-Type":"application/json"}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("User Creation Error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}})()()}),[n]);var T=function(e,t){g(!0),k(e),Q(t)};return Object(c.jsxs)("div",{className:"App flex-container grow",children:[Object(c.jsx)("div",{className:"fixed",children:Object(c.jsx)(Le,{user:n,setUser:s,setUsername:o})}),Object(c.jsx)(b.a,{style:{marginTop:"100px"},children:Object(c.jsx)(h.a,{xs:6,children:Object(c.jsx)(p.a,{position:"top-end",className:"p-3",children:Object(c.jsxs)(O.a,{onClose:function(){return g(!1)},show:v,delay:3e3,autohide:!0,animation:!0,children:[Object(c.jsxs)(O.a.Header,{children:[Object(c.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(c.jsx)("strong",{className:"me-auto",children:S})]}),Object(c.jsx)(O.a.Body,{children:q})]})})})}),Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{path:"/name",children:Object(c.jsx)($e,{setUsername:o})}),Object(c.jsx)(j.b,{path:"/admin",children:m.auth().currentUser?Object(c.jsx)(et,{setUser:s,user:n,showToast:T}):Object(c.jsx)(N,{setUser:s,user:n})}),Object(c.jsx)(j.b,{path:"/dashboard",children:m.auth().currentUser?Object(c.jsx)(et,{setUser:s,user:n,showToast:T}):Object(c.jsx)(xe,{user:n})}),Object(c.jsx)(j.b,{path:"/create-quiz",children:Object(c.jsx)(oe,{user:n,showToast:T})}),Object(c.jsx)(j.b,{path:"/created-successfully/:quizCode",component:ve}),Object(c.jsx)(j.b,{path:"/join-quiz",children:Object(c.jsx)(le,{user:n})}),Object(c.jsx)(j.b,{path:"/attempt-quiz/:quizCode",component:Ee}),Object(c.jsx)(j.b,{path:"/attempt-blind-quiz/:quizCode",component:Ve}),Object(c.jsx)(j.b,{path:"/responses/:quizCode",component:Ze}),Object(c.jsx)(j.b,{path:"/",children:m.auth().currentUser?Object(c.jsx)(et,{setUser:s,user:n,showToast:T}):Object(c.jsx)(xe,{user:n})}),Object(c.jsx)(j.b,{component:ge})]})]})},nt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,331)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),s(e),a(e)}))};r.a.render(Object(c.jsx)(me.a,{children:Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(tt,{})})}),document.getElementById("root")),nt()}},[[259,1,2]]]);
//# sourceMappingURL=main.c761c634.chunk.js.map